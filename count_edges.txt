IFS=$'\n' # make new lines the only separator

echo -e "Count lines containing edges"

# declare variable as integers
declare -i edges=0
declare -i start_overlap_first=0
declare -i end_overlap_first=0
declare -i start_overlap_second=0
declare -i end_overlap_second=0
declare -i iter=0

# Loop through lines and check for edges
for line in $(cat data/Spruce_fingerprint_2017-03-10_16.48_head_5000.olp.m4)
	do
		# get values per line
		start_overlap_first=$(echo "$line" | awk '{ print $6 }')
		end_overlap_first=$(echo "$line" | awk '{ print $7 }')
		start_overlap_second=$(echo "$line" | awk '{ print $10 }')
		end_overlap_second=$(echo "$line" | awk '{ print $11 }')
		
		# cacluate lengths of overlaps
		length_overlap_first=$((end_overlap_first - start_overlap_first ))
		length_overlap_second=$((end_overlap_second - start_overlap_second ))
		
		#echo $length_overlap_first
		#echo $length_overlap_second
		
		# check if overlap in both contigs are at least of length 1000
		if [[ ( $length_overlap_first -gt 999 ) && ( $length_overlap_second -gt 999 ) ]]
		then
			edges+=1
		else
			:
		fi
		
		# check number of iterations performed
		#iter+=1
		#if [ $(( $iter % 1000 )) -eq 0 ]
		#then
		#	echo $iter
		#else
		#	:
		#fi
done
echo $edges