IFS=$'\n' # make new lines the only separator

echo -e "Count lines containing edges"

# declare variable as integers
declare -i edges=0
declare -i start_overlap_first=0
declare -i end_overlap_first=0
declare -i length_first=0
declare -i start_overlap_second=0
declare -i end_overlap_second=0
declare -i length_second=0

# Loop through lines and check for edges
for line in $(cat data/Spruce_fingerprint_2017-03-10_16.48.olp.m4)
	do
		# get values per line
		start_overlap_first=$(echo "$line" | awk '{ print $6 }')
		end_overlap_first=$(echo "$line" | awk '{ print $7 }')
		length_first=$(echo "$line" | awk '{ print $8 }')
		start_overlap_second=$(echo "$line" | awk '{ print $10 }')
		end_overlap_second=$(echo "$line" | awk '{ print $11 }')
		length_second=$(echo "$line" | awk '{ print $12 }')
		
		# cacluate lengths of overlaps
		length_overlap_first=$((end_overlap_first - start_overlap_first ))
		length_overlap_second=$((end_overlap_second - start_overlap_second ))
		
		# check if overlap is at end of first contig and is at least of length 1000
		if [[ ( $end_overlap_first == $length_first ) && ( $length_overlap_first -gt 999 ) ]]
		then
			overlap_end_long_first=true
		else
			overlap_end_long_first=false
		fi
		
		# check if overlap is at start of second contig and is at least of length 1000
		if [[ ( $start_overlap_second == 0 ) && ( $length_overlap_second -gt 999 ) ]]
		then
			overlap_start_long_second=true
		else
			overlap_start_long_second=false
		fi
		
		# check if edge and save in file with edges if true
		if [[ ( $overlap_end_long_first = true ) &&  ( $overlap_start_long_second = true ) ]]
		then
			edges+=1
		else
			edges+=0
		fi
done
echo $edges